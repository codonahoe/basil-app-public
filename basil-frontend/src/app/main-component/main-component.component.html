<app-ai-modal [generatePrompt]="true"></app-ai-modal>
<nav class="navbar navbar-expand-lg">
    <div class="container-fluid">
        <a class="navbar-brand">Welcome to your B.A.S.I.L!</a>
        <button type="button" class="btn btn-primary green-button" data-bs-toggle="modal" data-bs-target="#aiModal">
            Launch A.I. Suggestion Generation
        </button>
    </div>
  </nav>
  <div class="basil-material">
    <div class="basil-material-header">
        This is where you will see all of the data related to your plant.
    </div>
    <div class="basil-material-body mt-3">
        <div class="container mt-5">
            <div class="row justify-content-center">
                    <!-- Water Pump Toggle -->
                <div class="col-6">
                    <div class="form-check form-switch">
                        <input 
                            class="form-check-input" 
                            type="checkbox" 
                            id="waterPumpToggle"
                            [checked]="waterPumpValue"
                            (click)="updateWaterPump()"
                        >
                        <label class="form-check-label" for="waterPumpToggle">Water Pump is currently {{ waterPumpValue ? 'On' : 'Off' }}</label>
                    </div>
                </div>
                    <!-- Light Array Toggle -->
                <div class="col-6">
                    <div class="form-check form-switch">
                        <input 
                            class="form-check-input" 
                            type="checkbox" 
                            id="lightArrayToggle"
                            (click)="updateLightArray()" 
                        >
                        <label class="form-check-label" for="lightArrayToggle">Light Array Value is currently {{ lightArrayValue ? 'On' : 'Off'}}</label>
                    </div>
                </div>
            </div>
        </div>
    
      <div class="row justify-content-center">
        <img src="../../assets/basil.png" alt="Basil Plant" class="img-fluid" style="max-width: 300px; margin-bottom: 20px;">
      </div>
      <div class="container mt-5">
        <div *ngFor="let userData of userData; let i = index">
            <div class="mt-3 label grey-label p-2 rounded">Measurement #{{ i + 1 }} taken on {{ userData.addedUTCDateTime }} UTC</div>
            <div *ngIf="i != 0">
                <div class="row text-center mt-3">
                    <div class="col">
                        <div class="label bg-light p-2 rounded">Temperature:</div>
                    </div>
                    <div class="col">
                        <div class="label bg-light p-2 rounded">Humidity:</div>
                    </div>
                    <div class="col">
                        <div class="label bg-light p-2 rounded">Color:</div>
                    </div>
                    <div class="col">
                        <div class="label bg-light p-2 rounded">pH:</div>
                    </div>
                    <div class="col">
                        <div class="label bg-light p-2 rounded">Light:</div>
                    </div>
                    <div class="col">
                        <div class="label bg-light p-2 rounded">Water Level:</div>
                    </div>
                </div>
          
                <div class="row text-center mt-3">
                    <div class="col">
                        <div class="label">{{ userData ? userData.temperature : 0 }} °C</div>
                    </div>
                    <div class="col">
                        <div class="label">{{ userData ? userData.humidity : 0 }} %</div>
                    </div>
                    <div class="col">
                        <div class="label">{{ userData ? userData.color : 'N/A' }}</div>
                    </div>
                    <div class="col">
                        <div class="label">{{ userData ? userData.ph : 'N/A' }}</div>
                    </div>
                    <div class="col">
                        <div class="label">{{ userData ? userData.light : 'N/A' }} lux</div>
                    </div>
                    <div class="col">
                        <div class="label">{{ userData ? userData.waterLevel == 0 ? 'Needs Water' : 'Sufficient Water' : 0 }}</div>
                    </div>
                </div>
            </div>
            <div *ngIf="i == 0">
                <div class="row text-center mt-3">
                    <div class="col">
                        <div class="label bg-light p-2 rounded">Temperature:</div>
                    </div>
                    <div class="col">
                        <div class="label bg-light p-2 rounded">Humidity:</div>
                    </div>
                    <div class="col">
                        <div class="label bg-light p-2 rounded">Color:</div>
                    </div>
                    <div class="col">
                        <div class="label bg-light p-2 rounded">pH:</div>
                    </div>
                    <div class="col">
                        <div class="label bg-light p-2 rounded">Light:</div>
                    </div>
                    <div class="col">
                        <div class="label bg-light p-2 rounded">Water Level:</div>
                    </div>
                </div>
        
                <div class="row text-center mt-3">
                    <div class="col">
                        <div class="label">{{ userData ? userData.temperature : 0 }} °C</div>
                    </div>
                    <div class="col">
                        <div class="label">{{ userData ? userData.humidity : 0 }} %</div>
                    </div>
                    <div class="col">
                        <div class="label">{{ userData ? userData.color : 'N/A' }}</div>
                    </div>
                    <div class="col">
                        <div class="label">{{ userData ? userData.ph : 'N/A' }}</div>
                    </div>
                    <div class="col">
                        <div class="label">{{ userData ? userData.light : 'N/A' }} lux</div>
                    </div>
                    <div class="col">
                        <div class="label">{{ userData ? userData.waterLevel == 0 ? 'Needs Water' : 'Sufficient Water' : 0 }}</div>
                    </div>
                </div>
            </div>
        </div>

      </div>
    </div>
  </div>